import{k as c,aI as R,a9 as P,aJ as ke,s as L,e as we,al as F,aK as ye,aL as _e,d as U,z as O,A as V,B as C,D as k,aj as K,J as i,a4 as Se,C as Y,ac as W,ap as xe,a8 as z,aM as be,I as q,L as H,K as ae,av as ue,E,aN as Te,ai as G,ao as ce,aO as $e,aP as Ie,X as Z,a3 as de,aQ as fe,M as ve,F as De,aR as Q,U as pe,Z as X,a6 as ee,a7 as ge,r as Me,ak as te,am as Ae,aS as se,W as J,aa as le,h as b,ah as Ce,aT as Ee}from"#entry";import{d as Le}from"./DtXqOkeS.js";import{k as ne,M as Ve,a as Ne,_ as me,l as Re}from"./CN5EsVXz.js";import{A as he}from"./CJ2mcu1u.js";import{_ as oe}from"./CWJcnSqZ.js";import{_ as Be}from"./Dq2_-K6K.js";import{_ as Oe}from"./Cn1eMX6q.js";function ie(n,p,o){const e=Array.isArray(n)?n:[n];return{register:()=>e.forEach(u=>document.addEventListener(u,p,o)),unregister:()=>e.forEach(u=>document.removeEventListener(u,p,o))}}function Ue(n,p,o){const e=Array.isArray(n)?n:[n];return{register:u=>e.forEach(v=>u?.addEventListener(v,p,o)),unregister:u=>e.forEach(v=>u?.removeEventListener(v,p,o))}}const B={left:"left",right:"right",up:"up",down:"down"},Pe=1;function je(n,p,o,e){const u=c(()=>R(n)?.offsetWidth??0),v=c(()=>R(n)?.offsetHeight??0),d=c(()=>R(o).has("left")),w=c(()=>R(o).has("right")),g=c(()=>R(o).has("up")),m=c(()=>R(o).has("down")),_=c(()=>{if(w.value&&d.value&&m.value&&g.value)return"none";const r=[];return!m.value&&!g.value?r.push("pan-y"):g.value?m.value||r.push("pan-up"):r.push("pan-down"),!w.value&&!d.value?r.push("pan-x"):d.value?w.value||r.push("pan-left"):r.push("pan-right"),r.join(" ")});P(()=>R(p)?.style.setProperty("touch-action",_.value));const s=ke({from:{x:0,y:0},to:{x:0,y:0},offset:c(()=>({x:s.to.x-s.from.x,y:s.to.y-s.from.y}))}),a={progress:L(0),top:L("0"),left:L("0"),reset(){a.top.value="0",a.left.value="0",a.progress.value=0,s.from.x=s.to.x,s.from.y=s.to.y},isSwipingRight:c(()=>w.value&&h.value&&s.offset.x>0),isSwipingLeft:c(()=>d.value&&h.value&&s.offset.x<0),isSwipingUp:c(()=>g.value&&M.value&&s.offset.y<0),isSwipingDown:c(()=>m.value&&M.value&&s.offset.y>0),isSwiping:c(()=>!!y.value)},h=c(()=>Math.abs(s.offset.x)>Math.abs(s.offset.y)),M=c(()=>Math.abs(s.offset.x)<Math.abs(s.offset.y)),y=c(()=>a.isSwipingRight.value||a.isSwipingLeft.value?Math.min(u.value,Math.abs(s.offset.x)):a.isSwipingUp.value||a.isSwipingDown.value?Math.min(v.value,Math.abs(s.offset.y)):0),I=c(()=>u.value&&y.value?y.value/u.value:v.value&&y.value?y.value/v.value:0);function x(r,N){N.x=r.pageX,N.y=r.pageY}const{register:l,unregister:t}=Ue("pointerdown",r=>{r.isPrimary&&(r.stopImmediatePropagation(),S(),$(),x(r,s.from),x(r,s.to))}),{register:$,unregister:D}=ie(["pointerup","pointercancel"],async r=>{if(r.isPrimary){if(r.stopImmediatePropagation(),r.preventDefault(),f(),D(),a.progress.value<Pe){a.reset();return}if(a.progress.value=1,a.isSwipingRight.value){a.top.value="0",a.left.value=`${u.value}px`,e("right");return}if(a.isSwipingLeft.value){a.top.value="0",a.left.value=`${-u.value}px`,e("left");return}if(a.isSwipingUp.value){a.top.value=`${-v.value}px`,a.left.value="0",e("up");return}if(a.isSwipingDown.value){a.top.value=`${v.value}px`,a.left.value="0",e("down");return}}}),{register:S,unregister:f}=ie("pointermove",r=>{if(r.isPrimary){if(r.stopImmediatePropagation(),r.preventDefault(),x(r,s.to),a.progress.value=I.value,a.isSwipingRight.value){a.top.value="0",a.left.value=`${y.value}px`;return}if(a.isSwipingLeft.value){a.top.value="0",a.left.value=`${-y.value}px`;return}if(a.isSwipingUp.value){a.top.value=`${-y.value}px`,a.left.value="0";return}if(a.isSwipingDown.value){a.top.value=`${y.value}px`,a.left.value="0";return}}});function T(r){t(r),f(),D()}return we(()=>T(R(p))),F(ye(p),(r,N)=>{T(N??null),l(r)},{immediate:!0}),_e(a)}const qe={class:"flex h-full w-14"},ze={class:"text-[0.5em] uppercase"},He=U({__name:"SwipeIcon",props:{name:{},label:{},progress:{}},setup(n){return(p,o)=>{const e=Se;return V(),O("div",qe,[C("div",{class:W(["grid h-full content-center justify-items-center gap-1","overflow-clip p-2","whitespace-nowrap text-white"]),style:K({width:`${Math.max(50,100*n.progress)}%`,"--tw-bg-opacity":n.progress,"--tw-text-opacity":n.progress})},[k(e,{name:n.name,style:K({opacity:("denormalize"in p?p.denormalize:i(Le))(n.progress,-.5,1)})},null,8,["name","style"]),C("div",ze,Y(n.label),1)],4)])}}}),Ge=Object.assign(He,{__name:"ASwipeIcon"}),Fe={key:0,class:"absolute inset-0 flex h-full shrink-0 translate-x-[calc(100%+1px)] justify-start","data-swipe-left":""},Ye={key:1,class:"absolute inset-0 flex h-full shrink-0 translate-x-[calc(-100%-1px)] justify-end","data-swipe-right":""},We={key:2,class:"absolute inset-0 flex w-full shrink-0 translate-y-[calc(100%+1px)] flex-col justify-start","data-swipe-up":""},Je={key:3,class:"absolute inset-0 flex w-full shrink-0 translate-y-[calc(-100%-1px)] flex-col justify-end","data-swipe-down":""},Xe=U({__name:"Swipe",props:{disable:{type:Boolean,default:!1},msDuration:{default:150},noRight:{type:Boolean},noLeft:{type:Boolean},noUp:{type:Boolean},noDown:{type:Boolean}},emits:["left","right","up","down"],setup(n,{expose:p,emit:o}){const e=xe(),u=o,v=z("target"),d=c(()=>{const t=v.value?.parentElement??null;return t===null?t:h.value?t.querySelector("[data-swipe-left] > *")??t:M.value?t.querySelector("[data-swipe-right] > *")??t:y.value?t.querySelector("[data-swipe-up] > *")??t:I.value?t.querySelector("[data-swipe-down] > *")??t:t}),w=c(()=>{const t=new Set;return n.disable||(!n.noRight&&e.right&&t.add(B.left),!n.noLeft&&e.left&&t.add(B.right),!n.noDown&&e.down&&t.add(B.up),!n.noUp&&e.up&&t.add(B.down)),t}),{left:g,top:m,progress:_,isSwiping:s,reset:a,isSwipingLeft:h,isSwipingRight:M,isSwipingUp:y,isSwipingDown:I}=be(je(d,v,w,t=>{switch(t){case"left":return u(B.right,x.value);case"right":return u(B.left,x.value);case"up":return u(B.down,x.value);case"down":return u(B.up,x.value)}})),x=c(()=>({reset:a.value})),l=L(!1);return F(s,t=>{t||(l.value=!0,setTimeout(()=>{l.value=!1},n.msDuration))}),p({reset:a}),(t,$)=>(V(),O("div",{ref:"target",style:K({transform:`translateX(${i(g)}) translateY(${i(m)})`,transitionDuration:i(g)||i(m)?void 0:`${n.msDuration}ms`}),class:W(["relative",{"transition-transform ease-linear":!i(s)}])},[q(t.$slots,"default",{progress:i(_),reset:i(a),isSwiping:i(s)||i(l)}),e.right?(V(),O("div",Fe,[q(t.$slots,"right",{progress:i(_),reset:i(a),isSwiping:i(h)||i(l)})])):H("",!0),e.left?(V(),O("div",Ye,[q(t.$slots,"left",{progress:i(_),reset:i(a),isSwiping:i(M)||i(l)})])):H("",!0),e.down?(V(),O("div",We,[q(t.$slots,"down",{progress:i(_),reset:i(a),isSwiping:i(y)||i(l)})])):H("",!0),e.up?(V(),O("div",Je,[q(t.$slots,"up",{progress:i(_),reset:i(a),isSwiping:i(I)||i(l)})])):H("",!0)],6))}}),Ke=Object.assign(Xe,{__name:"ASwipe"}),Ze={class:"mt-4 grid grid-cols-[1fr_auto_1fr] pb-[40dvh] text-xs text-gray-500"},Qe=U({__name:"ListItemGroup",props:{itemNext:{},itemThis:{}},setup(n){function p(v){const d=L([1/0,null]),w=c(()=>d.value[0]);let g=null;function m(){const{isAvailable:_,msUpdateAvailabilityAt:s}=R(v);d.value=_?[1/0,null]:Te(s,Temporal.Now.zonedDateTimeISO(Temporal.Now.timeZoneId()))}return m(),P(()=>{g!==null&&(clearTimeout(g),g=null),w.value!==1/0&&(g=setTimeout(m,w.value))}),c(()=>d.value[1])}const o=p(()=>n.itemNext===void 0?{isAvailable:!0,msUpdateAvailabilityAt:1/0}:n.itemNext.task),e=p(()=>n.itemThis.task),u=c(()=>n.itemNext===void 0||n.itemThis.task.isAvailable||o.value===e.value?null:e.value);return(v,d)=>{const w=ue;return V(),ae(w,{show:i(u)!==null,"no-appear":""},{default:E(()=>[C("div",Ze,[d[0]||(d[0]=C("div",{class:"m-auto h-[1px] w-[calc(100%-1rem)] bg-current"},null,-1)),C("div",null,Y(i(u)),1),d[1]||(d[1]=C("div",{class:"m-auto h-[1px] w-[calc(100%-1rem)] bg-current"},null,-1))])]),_:1},8,["show"])}}}),et=Object.assign(Qe,{__name:"MTaskListItemGroup"}),tt={class:"py-1"},at=U({__name:"TaskList",props:{query:{},relation:{}},emits:["open-task"],setup(n,{expose:p,emit:o}){const e=ne(),u=o,v=z("task-loader");async function d(){if(v.value===null)return;const s=n.query.anchor!==void 0?await Ie.get(n.query.anchor):void 0;v.value.refresh({anchor:s,purge:m.value||w}),m.value=!1,w=!1}p({refresh:d});let w=!1;P(()=>{w=!0,n.query.title&&(n.query.anchor=void 0)},{flush:"sync"}),P(()=>n.query.anchor=G.value[0],{flush:"sync"});async function g(s,a){s.task.isDone=!s.task.isDone,await s.task.saved,await d()}const m=L(!0);ce([v,()=>n.query,()=>G.value],d,{deep:!0,debounce:()=>m.value?0:300});function _(s){return Z.getTaskListItems({...n.query,limit:s.limit,range:s.range?.map(a=>a.task.id),before:s.before===null?null:s.before?.task.id,after:s.after===null||s.range===void 0&&s.before===void 0&&s.after===void 0?null:s.after?.task.id})}return(s,a)=>{const h=Ge,M=Ve,y=Ke,I=$e,x=et,l=he;return V(),ae(l,{ref:"task-loader",load:_,"get-key":t=>t.task.id},{item:E(({item:t,items:$,index:D})=>[C("div",tt,[k(I,{class:W(["overflow-hidden !p-0",["hue-rotate-(--hue-rotation)",{"animate-anchor":i(G).includes(t.task.id)}]])},{default:E(()=>[k(y,{disable:i(e).isEditMode,"no-left":t.task.subtaskIds.size>0,"no-right":"",onLeft:({reset:S})=>{g(t,$[D-1]??$[D+1]),S()},onRight:a[0]||(a[0]=({reset:S})=>{S()})},{left:E(({progress:S})=>[k(h,{name:"done",progress:S,class:"justify-end bg-green-500/20",label:t.task.isDone?"Not done":"Done"},null,8,["progress","label"])]),default:E(({isSwiping:S})=>[k(M,{task:t.task,class:W({"pointer-events-none":S}),path:n.relation===void 0?t.task.id:`${n.relation.target.id}-${n.relation.id}-${t.task.id}`,onEdit:f=>!S&&i(e).onTaskSelect(f),onSelect:f=>i(e).isEditMode?i(e).onTaskSelect(f):u("open-task",t.task.id)},null,8,["task","class","path","onEdit","onSelect"])]),_:2},1032,["disable","no-left","onLeft"])]),_:2},1032,["class"]),k(x,{"item-this":t,"item-next":$[D+1]},null,8,["item-this","item-next"])])]),_:1},8,["get-key"])}}}),_t=Object.assign(at,{__name:"OTaskList"}),nt={class:"flex px-2 pt-2"},ot=new Map([["subtasks","suptasks"],["suptasks","subtasks"],["blockers","blocked"],["blocked","blockers"]]),st=U({__name:"InteractionGroup",setup(n,{expose:p}){p({create:m});const o=z("dialog-group"),e=ne(),u=L(null),v=L("subtasks"),d=L(""),w=c(()=>e.taskIdsSelected),g=c(()=>ot.get(v.value));function m(){if(e.branchRootsSelected.size===0)throw new Error("No tasks selected");if(e.branchRootsSelected.size>1)throw new Error("Cannot group tasks from different roots");u.value=e.branchRootsSelected.values().next().value.split("-")[0]||null,v.value=e.relationsSelected.values().next().value??"subtasks",d.value="",o.value?.open()}async function _(){const s=pe.fromData({title:d.value});d.value="",await Z.set(s);for(const a of w.value)await X.emit(a,`${g.value}.add`,s),console.log(a,`${g.value}.add`,s.id);if(u.value!==null){const a=await Z.get(u.value);console.log(a);for(const h of w.value)await X.emit(h,`${g.value}.del`,a),console.log(h,`${g.value}.del`,a.id);await X.emit(s.id,`${g.value}.add`,a),console.log(s.id,`${g.value}.add`,a.id)}o.value?.close(),G.value=[s.id],e.mode="view"}return(s,a)=>{const h=oe,M=ve,y=fe,I=Q;return V(),ae(I,{ref:"dialog-group"},{header:E(()=>[...a[1]||(a[1]=[De("new group",-1)])]),body:E(({})=>[C("div",nt,[k(h,{modelValue:i(d),"onUpdate:modelValue":a[0]||(a[0]=x=>de(d)?d.value=x:null),modelModifiers:{trim:!0},placeholder:"New grouping task name",class:"grow"},null,8,["modelValue"]),k(y,{show:!!i(d)},{default:E(()=>[k(M,{flat:"",icon:"save",class:"ml-2",onClick:_})]),_:1},8,["show"])])]),_:1},512)}}}),lt=Object.assign(st,{__name:"OTaskInteractionGroup"}),it={class:"mx-auto flex max-w-md shrink flex-col space-y-2 p-2 pb-0"},rt={class:"py-2"},ut=U({__name:"Tags",props:{modelValue:{required:!0},modelModifiers:{}},emits:ee(["done"],["update:modelValue"]),setup(n,{emit:p}){const o=ge(n,"modelValue"),e=p,u=Me([]);P(v);function v(){u.value=[...o.value]}function d(){o.value=u.value,e("done")}function w(){v(),e("done")}const g=te(async()=>{const[l,t]=await J.getTags({ids:u.value});return t},[]),m=L("");async function _(l){u.value.push(l.id),await se()}async function s(l){u.value=u.value.filter(t=>t!==l.id),await se()}const a=c(()=>m.value?{iconLeft:"cancel",iconClickLeft(){m.value=""}}:{}),h=z("tag-loader");async function M(){h.value&&h.value.refresh({purge:y.value})}const y=L(!0),I=c(()=>({name:m.value,notIds:u.value}));ce([h,()=>I.value],M,{deep:!0,debounce:()=>y.value?0:300});function x(l){return J.getTags({...I.value,limit:l.limit,range:l.range?.map(t=>t.id),before:l.before?.id,after:l.after?.id})}return(l,t)=>{const $=Ne,D=he,S=Oe,f=me,T=oe;return V(),O("div",it,[k(S,{class:"flex-1"},{default:E(()=>[k(D,{ref:"tag-loader",load:x,"get-key":r=>r.id},{item:E(({item:r})=>[C("div",rt,[k($,{tag:r,class:"text-lg! !p-4",onClick:N=>_(r)},null,8,["tag","onClick"])])]),_:1},8,["get-key"])]),_:1}),k(f,{class:"mt-2 shrink-0 [&_.tag]:p-[1em]",tags:i(g),onTagClick:s},null,8,["tags"]),k(T,Ae({modelValue:i(m),"onUpdate:modelValue":t[0]||(t[0]=r=>de(m)?m.value=r:null),modelModifiers:{trim:!0},class:"col-span-2 shrink-0"},i(a),{placeholder:"Search tags","icon-left":"cancel","icon-click-left":w,"icon-right":"done","icon-click-right":d}),null,16,["modelValue"])])}}}),re=Object.assign(ut,{__name:"OSelectorTags"}),ct={class:"text-picked-pastel-120/85 flex justify-center py-2 font-mono"},dt={class:"flex gap-2 py-2"},ft={class:"pl-1"},vt=U({__name:"ListFooter",props:ee({relation:{},filterDefaults:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:ee(["save-task"],["update:modelValue"]),setup(n,{emit:p}){const o=ne(),e=ge(n,"modelValue"),u=p,v=c(()=>JSON.stringify({...n.filterDefaults,ids:void 0,title:void 0})),d=c(()=>v.value!==JSON.stringify({...e.value,ids:void 0,title:void 0}));P(()=>{if(!e.value.everywhere)switch(n.relation?.id){case"blocked":e.value.isBlocked=!0}});function w(){e.value={...n.filterDefaults,ids:e.value.ids,title:e.value.title}}const g=z("interaction-group"),m=Re(async()=>(Ee.value,n.relation?await n.relation.forbidden():()=>!0),()=>!0),_=c(()=>{for(const l of o.taskIdsSelected)if(m.value?.(l)!==!1)return!1;return!0}),s=c(()=>{const l=[];return o.isSomeEditMode&&l.push({key:"cancel",label:"cancel",icon:"cancel",onClick:()=>o.mode=o.isEditMode?"view":"edit"}),o.isEditMode&&o.tasksSelected&&l.push({key:"delete",label:"delete",icon:"task:delete",onClick:o.deleteSelected}),o.isEditMode&&(o.tasksSelectedInSingleCommonRoot||o.tasksSelectedHaveNoGroup)&&l.push({key:"group",label:"group",icon:"task:group",onClick:()=>g.value?.create()}),o.isEditMode&&o.tasksSelectedSingleHasChildren&&l.push({key:"ungroup",label:"ungroup",icon:"task:ungroup",onClick:()=>o.ungroupSelected(n.relation)}),o.isEditMode&&o.tasksSelected&&l.push({key:"move",label:"move",icon:"task:move",onClick:o.moveSelected}),n.relation!==null&&o.isMovingSelected&&_.value&&l.push({key:"move",label:"move here",icon:"task:move",onClick:()=>o.moveSelectedTo(n.relation.target.id,n.relation.id)}),o.isEditMode&&o.tasksSelected&&l.push({key:"relate",label:"relate",icon:"task:relate",onClick:o.relateSelected}),n.relation!==null&&o.isRelatingSelected&&_.value&&l.push({key:"relate",label:"relate to",icon:"task:relate",onClick:()=>o.relateSelectedTo(n.relation.target.id,n.relation.id)}),o.isEditMode&&o.tasksSelected&&l.push({key:"unrelate",label:"unrelate",icon:"task:unrelate",onClick:o.unrelateSelected}),l});function a(){const l=pe.fromData(e.value);u("save-task",l)}le.use(()=>o.mode="view",()=>o.isSomeEditMode);const h=L(!1);le.use(()=>h.value=!1,h);const M=c(()=>{const l=[];function t(f,T,r,N){let A=()=>{};return{onClick(){A()},stop:!0,component:()=>b(Be,{items:y,modelValue:T,"onUpdate:model-value":N},{activator:({open:j})=>b("div",{onClick:A=j,class:"text-center text-[0.6em]"},[b("div",f),b("div",T===r?null:{class:$(T)},T?"[Yes]":T===!1?"[No]":"[Any]")]),label:()=>f})}}function $(f){return f?"text-success-neon":f===!1?"text-danger-neon":"text-current-neon"}d.value&&l.push({key:"reset",label:"Reset",icon:"filter-cancel",onClick:w}),l.push({key:"everywhere",component:()=>b("div",{class:"text-center text-[0.6em]"},[b("div","Everywhere"),b("div",e.value.everywhere===n.filterDefaults.everywhere?null:{class:$(e.value.everywhere??!1)},e.value.everywhere?"[Yes]":"[No]")]),icon:"everywhere",onClick(){e.value.everywhere=!e.value.everywhere||void 0,console.log(e.value.everywhere)}}),l.push({key:"isDone",...t("Done",e.value.isDone,n.filterDefaults.isDone,f=>e.value.isDone=f),icon:"done"}),l.push({key:"isOutdated",...t("Outdated",e.value.isOutdated,n.filterDefaults.isOutdated,f=>e.value.isOutdated=f),icon:"past"}),(e.value.everywhere||n.relation?.id!=="blocked")&&l.push({key:"isBlocked",...t("Blocked",e.value.isBlocked,n.filterDefaults.isBlocked,f=>e.value.isBlocked=f),icon:"blocked"});let D=()=>{};l.push({key:"tags",icon:"tags",stop:!0,component:()=>b(Q,null,{activator:({open:f})=>b("div",{onClick:D=f,class:"text-center text-[0.6em]"},[b("div","Tags"),b("div",{class:e.value.tagIds.length?$(!0):void 0},`[${e.value.tagIds.length||"any"}]`)]),header:()=>"Tags",body:({close:f})=>b(re,{class:"shrink",modelValue:e.value.tagIds,"onUpdate:modelValue":T=>e.value.tagIds=T,onDone:f})}),onClick(){D()}});let S=()=>{};return l.push({key:"not-tags",icon:"not-tags",stop:!0,component:()=>b(Q,null,{activator:({open:f})=>b("div",{onClick:S=f,class:"text-center text-[0.6em]"},[b("div","Not Tags"),b("div",{class:e.value.notTagIds.length?$(!1):void 0},`[${e.value.notTagIds.length||"none"}]`)]),header:()=>"Not Tags",body:({close:f})=>b(re,{class:"shrink",modelValue:e.value.notTagIds,"onUpdate:modelValue":T=>e.value.notTagIds=T,onDone:f})}),onClick(){S()}}),l}),y=new Map([[!0,{id:"yes",label:"Yes"}],[!1,{id:"no",label:"No"}],[void 0,{id:"any",label:"Any"}]]),I=te(async()=>{const[l,t]=await J.getTags({ids:e.value.tagIds});return t},[]),x=te(async()=>{const[l,t]=await J.getTags({ids:e.value.notTagIds});return t},[]);return F(()=>e.value.tagIds,l=>{l.some(t=>e.value.notTagIds.includes(t))&&(e.value.notTagIds=e.value.notTagIds.filter(t=>!l.includes(t)))}),F(()=>e.value.notTagIds,l=>{l.some(t=>e.value.tagIds.includes(t))&&(e.value.tagIds=e.value.tagIds.filter(t=>!l.includes(t)))}),(l,t)=>{const $=lt,D=ue,S=Ce,f=me,T=oe,r=ve,N=fe;return V(),O("div",null,[k($,{ref:"interaction-group"},null,512),k(D,{show:i(o).isSomeEditMode},{default:E(()=>[C("div",ct," selected "+Y(i(o).pathsSelected.size)+" task"+Y(i(o).pathsSelected.size===1?"":"s"),1)]),_:1},8,["show"]),k(S,{show:i(o).isSomeEditMode,items:i(s),"get-key":A=>A.key},null,8,["show","items","get-key"]),k(D,{show:!!i(I).length||!!i(x).length&&i(h)},{default:E(()=>[k(f,{class:"shrink-0 pt-2 [&_.tag]:p-[1em]",tags:i(I),"not-tags":i(h)?i(x):[],onTagClick:t[0]||(t[0]=A=>e.value.tagIds=e.value.tagIds.filter(j=>j!==A.id)),onNotTagClick:t[1]||(t[1]=A=>e.value.notTagIds=e.value.notTagIds.filter(j=>j!==A.id))},null,8,["tags","not-tags"])]),_:1},8,["show"]),k(S,{class:"grow pt-2",show:i(h),items:i(M),"get-key":A=>A.key},null,8,["show","items","get-key"]),C("div",dt,[k(T,{modelValue:e.value.title,"onUpdate:modelValue":t[2]||(t[2]=A=>e.value.title=A),placeholder:`search or create ${n.relation?.label??"tasks"}`,class:"grow [&_input]:placeholder:lowercase","icon-left":e.value.title?"cancel":void 0,"icon-click-left":()=>e.value.title="",autogrow:""},null,8,["modelValue","placeholder","icon-left","icon-click-left"]),C("div",null,[k(r,{flat:"",icon:"filter",onClick:t[3]||(t[3]=A=>h.value=!i(h))})]),k(N,{show:!!e.value.title},{default:E(()=>[C("div",ft,[k(r,{icon:"add",flat:"",onClick:a})])]),_:1},8,["show"])])])}}}),St=Object.assign(vt,{__name:"MTaskListFooter"});export{St as M,_t as _};
