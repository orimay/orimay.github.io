import{b3 as S,k as d,aI as H,b4 as L,b5 as de,al as ke,o as X,e as me,a$ as fe,s as j,a9 as P,b6 as ve,aY as he,X as T,b7 as J,ai as B,Z as O,d as b,b8 as te,ap as ge,z as u,A as i,ac as p,I as $,L as m,F,C as x,a6 as be,a7 as ye,K as A,E as C,B as n,ar as se,b9 as pe,_ as ae,aj as V,J as o,a4 as oe,D as g,ba as Z,ae as R,aW as we,aU as $e,af as _e,b1 as xe,aV as ze,aS as Me,bb as Ce,aP as Le,bc as Ae,aQ as Se,ag as Ie,u as Te}from"#entry";const Pe={get visibleDefault(){return new Set([-4,-3,-2,-1,0,1,2,3,4])},get pickableDefault(){return new Set([-4,-2,0,2,4])},labels:new Map([[4,"Essential"],[3,"Very High"],[2,"High"],[1,"High-Moderate"],[0,"Normal"],[-1,"Moderate-High"],[-2,"Moderate"],[-3,"Moderate-Low"],[-4,"Low"]]),color(e){return S(1-(e+4)/8,["#e7484d","#049923","#2d83ff"])}};function Be(){return Pe}const He={get visibleDefault(){return new Set([-4,-3,-2,-1,0,1,2,3,4])},get pickableDefault(){return new Set([-4,-2,0,2,4])},labels:new Map([[4,"Critical"],[3,"Very High"],[2,"High"],[1,"High-Moderate"],[0,"Normal"],[-1,"Moderate-High"],[-2,"Moderate"],[-3,"Moderate-Low"],[-4,"Low"]]),color(e){return S(1-(e+4)/8,["#e7484d","#049923","#2d83ff"])}};function je(){return He}const Ve={get visibleDefault(){return new Set([-4,-3,-2,-1,0,1,2,3,4])},get pickableDefault(){return new Set([-4,-2,0,2,4])},labels:new Map([[4,"Extreme"],[3,"Very Heavy"],[2,"High"],[1,"High-Moderate"],[0,"Normal"],[-1,"Moderate-High"],[-2,"Moderate"],[-3,"Moderate-Low"],[-4,"Low"]]),color(e){return S(1-(e+4)/8,["#e7484d","#049923","#2d83ff"])}};function De(){return Ve}function Ee(){document.body.offsetHeight}function ys(e,t){const s=[];for(const l of e){const c=t(l);if(c===void 0)continue;const k=c.getBoundingClientRect().top;s.push([c,k])}async function a(l){const c=[];for(const[r,y]of s){const v=r.getBoundingClientRect().top,_=y-v;if(_!==0){const h=r.style;h.transitionProperty="transform",h.transitionTimingFunction="ease-in-out",h.transitionDuration="0s",h.transform=`translateY(${_}px)`,c.push(r)}}Ee();const k=[];for(const r of c){let y;k.push(new Promise(h=>y=h));const v=h=>{h&&h.target!==r||(!h||/transform$/.test(h.propertyName))&&(r.removeEventListener("transitionend",v),r.removeEventListener("transitioncancel",v),y())};r.addEventListener("transitionend",v),r.addEventListener("transitioncancel",v);const _=r.style;_.transitionDuration=`${l}ms`,_.transform=""}await(k.length?Promise.allSettled(k):fe(l))}return{animateChildren:a}}function U(e,t,s){const a=d(()=>H(e).replaceAll(" ","_")),l=d(()=>a.value.replaceAll(/([^\da-z\-_])/gi,"\\$1")),c=d(()=>"data:image/svg+xml,"+encodeURIComponent(H(t).replaceAll(/[ \n]+/g," "))),k=L(a,()=>H(s)??!0),{load:r,unload:y}=de(d(()=>`.${l.value} { background-image: url('${c.value}'); background-repeat: no-repeat; }`),{manual:!0});return ke(k,v=>v?r():y()),X(()=>k.value&&r()),me(()=>k.value&&y()),a}function Ne(e,t,s){return Math.min(Math.max(s,e),t)}function Oe(e,t,s){const a=j(t),l=j(!1);return P(async()=>l.value&&(a.value=await e(),s?.())),d(()=>(l.value=!0,a.value))}const Fe=ve("interaction",()=>{const e=j("view"),t=he(new Set);P(()=>e.value==="view"&&t.clear());const s=d(()=>new Set(Array.from(t).map(f=>f.split("-").slice(-3).join("-")))),a=d(()=>new Set(Array.from(s.value).map(f=>{const w=f.split("-");return w.pop(),w.join("-")})));P(()=>console.log({branchesSelected:[...s.value],branchRootsSelected:[...a.value]}));const l=d(()=>new Set(Array.from(a.value).map(f=>f.split("-")[1]).filter(Boolean))),c=d(()=>new Set(Array.from(s.value).map(f=>f.split("-").at(-1)))),k=d(()=>a.value.size===1&&l.value.size===1),r=d(()=>a.value.size>0&&l.value.size===0),y=d(()=>c.value.size===1),v=Oe(async()=>{if(!y.value)return!1;for(const f of c.value)return(await T.get(f)).subtaskIds.size>0;return!1},!1);function _(f){e.value="edit",t.delete(f)||t.add(f)}async function h(){if(!(t.size===0||!await J.confirm("Are you sure you want to delete these selected tasks?"))){for(const w of c.value)await(await T.get(w)).delete();B.value=[],e.value="view"}}async function G(f){if(!(t.size!==1||!await J.confirm("Are you sure you want to ungroup this selected task?"))){for(const z of c.value)await(await T.get(z)).ungroup(f?.id??"subtasks");B.value=[...f?.ids??[]],e.value="view"}}function K(){e.value="edit:move"}async function D(f,w){if(t.size===0)return;const z=[];for(const I of s.value){const[E,N,ue]=I.split("-"),Y=await T.get(ue??E);N!==void 0&&await O.emit(E,`${N}.del`,Y),await O.emit(f,`${w}.add`,Y),z.push(Y.id)}B.value=z,e.value="view"}function W(){e.value="edit:relate"}async function q(f,w){if(t.size!==0){for(const z of c.value){const I=await T.get(z);await O.emit(f,`${w}.add`,I)}B.value=[...c.value],e.value="view"}}async function ee(){if(!(t.size===0||!await J.confirm("Are you sure you want to unrelate these selected tasks?"))){for(const w of s.value){const[z,I,E]=w.split("-"),N=await T.get(E);await O.emit(z,`${I}.del`,N)}B.value=[],e.value="view"}}const ne=d(()=>e.value==="view"),ie=d(()=>e.value==="edit"),le=d(()=>e.value.startsWith("edit")),ce=d(()=>e.value==="edit:move"),re=d(()=>e.value==="edit:relate");return{mode:e,onTaskSelect:_,deleteSelected:h,ungroupSelected:G,moveSelected:K,moveSelectedTo:D,relateSelected:W,relateSelectedTo:q,unrelateSelected:ee,isViewMode:ne,isEditMode:ie,isSomeEditMode:le,isMovingSelected:ce,isRelatingSelected:re,pathsSelected:t,branchesSelected:s,branchRootsSelected:a,relationsSelected:l,taskIdsSelected:c,tasksSelectedInSingleCommonRoot:k,tasksSelected:d(()=>c.value.size>0),tasksSelectedSingle:y,tasksSelectedSingleHasChildren:v,tasksSelectedHaveNoGroup:r}}),Re=["for"],Ue={key:1,class:"flex w-full select-none gap-2 text-nowrap font-bold tracking-widest"},Ge=b({__name:"Label",props:{id:{default:()=>te()},label:{default:""},type:{default:"before"}},setup(e){const t=ge();return(s,a)=>(i(),u("label",{class:p(["a-label","relative flex cursor-pointer flex-col text-base","transition-colors duration-300","text-picked-pastel/70 focus-within:text-picked-pastel"]),for:e.id},[e.type==="after"?$(s.$slots,"default",{key:0,id:e.id}):m("",!0),t.label||e.label?(i(),u("span",Ue,[$(s.$slots,"label",{id:e.id},()=>[F(x(e.label),1)])])):m("",!0),e.type!=="after"?$(s.$slots,"default",{key:2,id:e.id}):m("",!0)],8,Re))}}),Ke=Object.assign(Ge,{__name:"ALabel"}),We={class:"relative m-1 size-4"},qe=["id","value","autofocus"],Ye={class:"align-middle"},Je=b({__name:"Checkbox",props:be({id:{},label:{},value:{},autofocus:{type:Boolean,default:!1},after:{type:Boolean},circle:{type:Boolean}},{modelValue:{type:[Array,Set,Boolean]},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=ye(e,"modelValue");return(s,a)=>{const l=Ke;return i(),A(l,{id:e.id,label:e.label,class:"cursor-pointer transition-all",after:!e.after},{label:C(({id:c})=>[n("div",We,[se(n("input",{id:c,"onUpdate:modelValue":a[0]||(a[0]=k=>t.value=k),value:e.value,type:"checkbox",class:p(["absolute! left-0 top-0","peer","cursor-pointer","inline-block","focus:ring-0","focus:ring-offset-0"]),autofocus:e.autofocus},null,8,qe),[[pe,t.value]]),(i(),u("svg",{id:"checkmark",viewBox:"0 0 16 16",class:p(["absolute! pointer-events-none left-0 top-0 size-4 text-transparent transition-colors peer-checked:text-current",[e.circle?"rounded-full":"rounded"]])},[...a[1]||(a[1]=[n("defs",null,[n("mask",{id:"boxed-checkmark"},[n("rect",{width:"16",height:"16",fill:"white"}),n("path",{fill:"black",d:"M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z"})])],-1),n("rect",{x:"0",y:"0",width:"16",height:"16",fill:"currentColor",mask:"url(#boxed-checkmark)"},null,-1)])],2)),n("div",{class:p(["absolute! pointer-events-none left-0 top-0 size-4 border-2 border-current",[e.circle?"rounded-full":"rounded"]])},null,2)]),n("span",Ye,[$(s.$slots,"default",{},()=>[F(x(e.label),1)],!0)])]),_:3},8,["id","label","after"])}}}),Qe=Object.assign(ae(Je,[["__scopeId","data-v-d50799b2"]]),{__name:"ACheckbox"}),Xe=b({__name:"Progress",props:{value:{},color:{default:"currentColor"}},setup(e){const t=d(()=>e.value*100%25!==0);return(s,a)=>{const l=oe;return i(),u("div",{class:p(["relative","size-[1em] contain-strict","rounded-full","[transition-property:_background-color,--a-icon-progress-color]","bg-(--a-icon-progress-background-color)","after:absolute","after:inset-[10.5%]","after:rounded-full","after:bg-[conic-gradient(var(--a-icon-progress-color)_calc(var(--a-icon-progress-value)*100%-1%*var(--a-icon-progress-anti-aliasing)),transparent_calc(var(--a-icon-progress-value)*100%+1%*var(--a-icon-progress-anti-aliasing)),transparent_0%)]","after:duration-500","after:[transition-property:_--a-icon-progress-value,--a-icon-progress-color]"]),style:V({"--a-icon-progress-value":e.value,"--a-icon-progress-color":e.color,"--a-icon-progress-background-color":`color-mix(in oklch, ${e.color}, var(--color-back) 65%)`,"--a-icon-progress-anti-aliasing":+o(t)})},[e.value===1?(i(),A(l,{key:0,name:"done",size:"0.5em",class:"absolute! text-picked-deep left-1/2 top-1/2 z-10 -translate-x-1/2 -translate-y-1/2 [--color-picked:var(--a-icon-progress-background-color)]"})):m("",!0)],4)}}}),Ze=Object.assign(ae(Xe,[["__scopeId","data-v-7579e1e0"]]),{__name:"AIconProgress"}),et={class:"text-[0.75em]"},tt=b({__name:"Progress",props:{done:{},total:{}},setup(e){const t=d(()=>Ne(0,1,e.done/e.total));return(s,a)=>{const l=Ze;return e.total?(i(),u("div",{key:0,class:"leading-0 flex items-center gap-1 font-mono",style:V({"--color-picked":("quality"in s?s.quality:o(S))(o(t)),"--color-picked-offset":0})},[g(l,{value:o(t)},null,8,["value"]),n("div",et,x(e.done)+"/"+x(e.total),1)],4)):m("",!0)}}}),st=Object.assign(tt,{__name:"MProgress"}),at={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},ot=["href"],Q="a-icon-done",nt=b({__name:"Done",props:{color:{},svg:{type:Boolean}},setup(e){const t=L(Q),s=U(()=>`a-icon-done__${e.color}`,()=>`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
        <path
          fill="${e.color}"
          d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093l3.473-4.425z"
        />
      </svg>
    `,()=>!e.svg);return(a,l)=>e.svg?(i(),u("svg",at,[o(t)?(i(),u("symbol",{key:0,id:Q},[...l[0]||(l[0]=[n("path",{fill:"currentColor",d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093l3.473-4.425z"},null,-1)])])):m("",!0),n("use",{href:`#${Q}`},null,8,ot)])):(i(),u("div",{key:0,class:p([o(s),"size-[1em]"])},null,2))}}),it=Object.assign(nt,{__name:"AIconDone"}),lt={key:1,viewBox:"0 0 24 24"},ct={key:0},rt=["id"],ut=["y","height"],dt=["id"],kt=["fill","clip-path"],mt=["fill"],ft=["href"],vt=b({__name:"Fire",props:{value:{},color:{},svg:{type:Boolean}},setup(e){const t=d(()=>`a-icon-fire__${e.value}`),s=L(()=>`a-icon-fire_${e.svg?1:0}`,()=>e.svg),a=d(()=>`${t.value}__clipper`),l=L(()=>`${t.value}_${e.svg?1:0}`,()=>e.svg),c=U(()=>`a-icon-fire__${e.value}`,()=>`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <defs>
          <mask id="a-icon-fire_fill-mask">
            <path
              fill="#fff"
              stroke="#000"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17.66 11.2c-.23-.3-.51-.56-.77-.82c-.67-.6-1.43-1.03-2.07-1.66C13.33 7.26 13 4.85 13.95 3c-.95.23-1.78.75-2.49 1.32c-2.59 2.08-3.61 5.75-2.39 8.9c.04.1.08.2.08.33c0 .22-.15.42-.35.5c-.23.1-.47.04-.66-.12a.58.58 0 0 1-.14-.17c-1.13-1.43-1.31-3.48-.55-5.12C5.78 10 4.87 12.3 5 14.47c.06.5.12 1 .29 1.5c.14.6.41 1.2.71 1.73c1.08 1.73 2.95 2.97 4.96 3.22c2.14.27 4.43-.12 6.07-1.6c1.83-1.66 2.47-4.32 1.53-6.6l-.13-.26c-.21-.46-.77-1.26-.77-1.26m-3.16 6.3c-.28.24-.74.5-1.1.6c-1.12.4-2.24-.16-2.9-.82c1.19-.28 1.9-1.16 2.11-2.05c.17-.8-.15-1.46-.28-2.23c-.12-.74-.1-1.37.17-2.06c.19.38.39.76.63 1.06c.77 1 1.98 1.44 2.24 2.8c.04.14.06.28.06.43c.03.82-.33 1.72-.93 2.27"
            />
          </mask>
          <mask id="a-icon-fire_outline-mask">
            <path
              style="filter: brightness(0.5)"
              fill="#000"
              stroke="#fff"
              stroke-linejoin="round"
              stroke-width="1.5"
              d="M17.66 11.2c-.23-.3-.51-.56-.77-.82c-.67-.6-1.43-1.03-2.07-1.66C13.33 7.26 13 4.85 13.95 3c-.95.23-1.78.75-2.49 1.32c-2.59 2.08-3.61 5.75-2.39 8.9c.04.1.08.2.08.33c0 .22-.15.42-.35.5c-.23.1-.47.04-.66-.12a.58.58 0 0 1-.14-.17c-1.13-1.43-1.31-3.48-.55-5.12C5.78 10 4.87 12.3 5 14.47c.06.5.12 1 .29 1.5c.14.6.41 1.2.71 1.73c1.08 1.73 2.95 2.97 4.96 3.22c2.14.27 4.43-.12 6.07-1.6c1.83-1.66 2.47-4.32 1.53-6.6l-.13-.26c-.21-.46-.77-1.26-.77-1.26m-3.16 6.3c-.28.24-.74.5-1.1.6c-1.12.4-2.24-.16-2.9-.82c1.19-.28 1.9-1.16 2.11-2.05c.17-.8-.15-1.46-.28-2.23c-.12-.74-.1-1.37.17-2.06c.19.38.39.76.63 1.06c.77 1 1.98 1.44 2.24 2.8c.04.14.06.28.06.43c.03.82-.33 1.72-.93 2.27"
            />
          </mask>
        </defs>
        <clipPath id="idClipper">
          <rect
            x="0"
            y="${21-e.value*17}"
            width="24"
            height="${e.value*17}"
          />
        </clipPath>
        <path
          fill="${e.color}"
          d="M0 0h24v24H0z"
          mask="url(#a-icon-fire_fill-mask)"
          clip-path="url(#idClipper)"
        />
        <path
          fill="${e.color}"
          d="M0 0h24v24H0z"
          mask="url(#a-icon-fire_outline-mask)"
        />
      </svg>
    `,()=>!e.svg);return(k,r)=>e.svg?(i(),u("svg",lt,[o(s)?(i(),u("defs",ct,[...r[0]||(r[0]=[n("mask",{id:"a-icon-fire_fill-mask"},[n("path",{fill:"#fff",stroke:"#000","stroke-linejoin":"round","stroke-width":"2",d:"M17.66 11.2c-.23-.3-.51-.56-.77-.82c-.67-.6-1.43-1.03-2.07-1.66C13.33 7.26 13 4.85 13.95 3c-.95.23-1.78.75-2.49 1.32c-2.59 2.08-3.61 5.75-2.39 8.9c.04.1.08.2.08.33c0 .22-.15.42-.35.5c-.23.1-.47.04-.66-.12a.58.58 0 0 1-.14-.17c-1.13-1.43-1.31-3.48-.55-5.12C5.78 10 4.87 12.3 5 14.47c.06.5.12 1 .29 1.5c.14.6.41 1.2.71 1.73c1.08 1.73 2.95 2.97 4.96 3.22c2.14.27 4.43-.12 6.07-1.6c1.83-1.66 2.47-4.32 1.53-6.6l-.13-.26c-.21-.46-.77-1.26-.77-1.26m-3.16 6.3c-.28.24-.74.5-1.1.6c-1.12.4-2.24-.16-2.9-.82c1.19-.28 1.9-1.16 2.11-2.05c.17-.8-.15-1.46-.28-2.23c-.12-.74-.1-1.37.17-2.06c.19.38.39.76.63 1.06c.77 1 1.98 1.44 2.24 2.8c.04.14.06.28.06.43c.03.82-.33 1.72-.93 2.27"})],-1),n("mask",{id:"a-icon-fire_outline-mask"},[n("path",{class:"brightness-50",fill:"#000",stroke:"#fff","stroke-linejoin":"round","stroke-width":"1.5",d:"M17.66 11.2c-.23-.3-.51-.56-.77-.82c-.67-.6-1.43-1.03-2.07-1.66C13.33 7.26 13 4.85 13.95 3c-.95.23-1.78.75-2.49 1.32c-2.59 2.08-3.61 5.75-2.39 8.9c.04.1.08.2.08.33c0 .22-.15.42-.35.5c-.23.1-.47.04-.66-.12a.58.58 0 0 1-.14-.17c-1.13-1.43-1.31-3.48-.55-5.12C5.78 10 4.87 12.3 5 14.47c.06.5.12 1 .29 1.5c.14.6.41 1.2.71 1.73c1.08 1.73 2.95 2.97 4.96 3.22c2.14.27 4.43-.12 6.07-1.6c1.83-1.66 2.47-4.32 1.53-6.6l-.13-.26c-.21-.46-.77-1.26-.77-1.26m-3.16 6.3c-.28.24-.74.5-1.1.6c-1.12.4-2.24-.16-2.9-.82c1.19-.28 1.9-1.16 2.11-2.05c.17-.8-.15-1.46-.28-2.23c-.12-.74-.1-1.37.17-2.06c.19.38.39.76.63 1.06c.77 1 1.98 1.44 2.24 2.8c.04.14.06.28.06.43c.03.82-.33 1.72-.93 2.27"})],-1)])])):m("",!0),o(l)?(i(),u("clipPath",{key:1,id:o(a)},[n("rect",{x:"0",y:21-e.value*17,width:"24",height:e.value*17,class:"transition-[y,height]"},null,8,ut)],8,rt)):m("",!0),o(l)?(i(),u("symbol",{key:2,id:o(t)},[n("path",{fill:e.color,d:"M0 0h24v24H0z",mask:"url(#a-icon-fire_fill-mask)","clip-path":`url(#${o(a)})`,class:"transition-[color]"},null,8,kt),n("path",{fill:e.color,d:"M0 0h24v24H0z",mask:"url(#a-icon-fire_outline-mask)",class:"transition-[color]"},null,8,mt)],8,dt)):m("",!0),n("use",{href:`#${o(t)}`},null,8,ft)])):(i(),u("div",{key:0,class:p([o(c),"size-[1em]"])},null,2))}}),ht=Object.assign(vt,{__name:"AIconFire"}),gt={class:"flex grow items-center"},bt={class:"flex grow"},yt=Symbol(),pt=b({__name:"Urgency",props:{task:{},svg:{type:Boolean}},setup(e){const t=je(),s=Z(yt,()=>({visible:t.visibleDefault}),!0);return(a,l)=>{const c=ht;return i(),u("div",gt,[o(s).visible.has(e.task.urgency)?(i(),A(c,{key:0,value:(e.task.urgency+4)/8,class:p({"animate-breath shadow-transparent text-shadow-glow-sm":e.task.urgency===4}),color:o(t).color(e.task.urgency),svg:e.svg},null,8,["value","class","color","svg"])):m("",!0),n("div",bt,[$(a.$slots,"default")])])}}}),wt=Object.assign(pt,{__name:"MTaskPriorityUrgency"}),$t={key:1,viewBox:"0 0 48 48"},_t={key:0},xt=["id"],zt=["y","height"],Mt=["id"],Ct=["fill","clip-path"],Lt=["fill"],At=["href"],St=b({__name:"Star",props:{value:{},color:{},svg:{type:Boolean}},setup(e){const t=d(()=>`a-icon-star__${e.value}`),s=L(()=>`a-icon-star_${e.svg?1:0}`,()=>e.svg),a=d(()=>`${t.value}__clipper`),l=L(()=>`${t.value}_${e.svg?1:0}`,()=>e.svg),c=U(()=>`a-icon-star__${e.value}`,()=>`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
        <defs>
          <mask id="a-icon-star_fill-mask">
            <path
              fill="#fff"
              stroke="#000"
              stroke-linejoin="round"
              stroke-width="4"
              d="m23.999 5l-6.113 12.478L4 19.49l10.059 9.834L11.654 43L24 36.42L36.345 43L33.96 29.325L44 19.491l-13.809-2.013z"
            />
          </mask>
          <mask id="a-icon-star_outline-mask">
            <path
              style="filter: brightness(0.5)"
              fill="#000"
              stroke="#fff"
              stroke-linejoin="round"
              stroke-width="3"
              d="m23.999 5l-6.113 12.478L4 19.49l10.059 9.834L11.654 43L24 36.42L36.345 43L33.96 29.325L44 19.491l-13.809-2.013z"
            />
          </mask>
        </defs>
        <clipPath id="idClipper">
          <rect
            x="0"
            y="${39-e.value*30}"
            width="48"
            height="${e.value*31}"
          />
        </clipPath>
        <path
          fill="${e.color}"
          d="M0 0h48v48H0z"
          mask="url(#a-icon-star_fill-mask)"
          clip-path="url(#idClipper)"
        />
        <path
          fill="${e.color}"
          d="M0 0h48v48H0z"
          mask="url(#a-icon-star_outline-mask)"
        />
      </svg>
    `,()=>!e.svg);return(k,r)=>e.svg?(i(),u("svg",$t,[o(s)?(i(),u("defs",_t,[...r[0]||(r[0]=[n("mask",{id:"a-icon-star_fill-mask"},[n("path",{fill:"#fff",stroke:"#000","stroke-linejoin":"round","stroke-width":"4",d:"m23.999 5l-6.113 12.478L4 19.49l10.059 9.834L11.654 43L24 36.42L36.345 43L33.96 29.325L44 19.491l-13.809-2.013z"})],-1),n("mask",{id:"a-icon-star_outline-mask"},[n("path",{class:"brightness-50",fill:"#000",stroke:"#fff","stroke-linejoin":"round","stroke-width":"3",d:"m23.999 5l-6.113 12.478L4 19.49l10.059 9.834L11.654 43L24 36.42L36.345 43L33.96 29.325L44 19.491l-13.809-2.013z"})],-1)])])):m("",!0),o(l)?(i(),u("clipPath",{key:1,id:o(a)},[n("rect",{x:"0",y:39-e.value*30,width:"48",height:e.value*31,class:"transition-[y,height]"},null,8,zt)],8,xt)):m("",!0),o(l)?(i(),u("symbol",{key:2,id:o(t)},[n("path",{fill:e.color,d:"M0 0h48v48H0z",mask:"url(#a-icon-star_fill-mask)","clip-path":`url(#${o(a)})`,class:"transition-[color]"},null,8,Ct),n("path",{fill:e.color,d:"M0 0h48v48H0z",mask:"url(#a-icon-star_outline-mask)",class:"transition-[color]"},null,8,Lt)],8,Mt)):m("",!0),n("use",{href:`#${o(t)}`},null,8,At)])):(i(),u("div",{key:0,class:p([o(c),"size-[1em]"])},null,2))}}),It=Object.assign(St,{__name:"AIconStar"}),Tt={class:"flex grow items-center"},Pt={class:"flex grow"},Bt=Symbol(),Ht=b({__name:"Importance",props:{task:{},svg:{type:Boolean}},setup(e){const t=Be(),s=Z(Bt,()=>({visible:t.visibleDefault}),!0);return(a,l)=>{const c=It;return i(),u("div",Tt,[o(s).visible.has(e.task.importance)?(i(),A(c,{key:0,value:(e.task.importance+4)/8,color:o(t).color(e.task.importance),svg:e.svg},null,8,["value","color","svg"])):m("",!0),n("div",Pt,[$(a.$slots,"default")])])}}}),jt=Object.assign(Ht,{__name:"MTaskPriorityImportance"}),Vt={key:1,viewBox:"0 0 48 48"},Dt={key:0},Et=["id"],Nt=["y","height"],Ot=["id"],Ft=["fill","clip-path"],Rt=["fill"],Ut=["href"],Gt=b({__name:"Backpack",props:{value:{},color:{},svg:{type:Boolean}},setup(e){const t=d(()=>`a-icon-backpack__${e.value}`),s=L(()=>`a-icon-backpack_${e.svg?1:0}`,()=>e.svg),a=d(()=>`${t.value}__clipper`),l=L(()=>`${t.value}_${e.svg?1:0}`,()=>e.svg),c=U(()=>`a-icon-backpack__${e.value}`,()=>`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
        <defs>
          <mask id="a-icon-backpack_fill-mask">
            <path
              fill="#fff"
              stroke="#000"
              stroke-linejoin="round"
              stroke-width="4"
              d="M21.179 18.5a2.68 2.68 0 0 0-2.679 2.679c0 .177.144.321.321.321H29.18a.321.321 0 0 0 .321-.321a2.68 2.68 0 0 0-2.679-2.679zM24 4a8.001 8.001 0 0 0-7.951 7.113C11.239 13.872 8 19.058 8 25v3h32v-3c0-5.942-3.24-11.128-8.049-13.887A8.001 8.001 0 0 0 24 4m0 5c-1.764 0-3.461.285-5.048.813a5.501 5.501 0 0 1 10.096 0A15.984 15.984 0 0 0 24 9m-8 12.179A5.179 5.179 0 0 1 21.179 16h5.642A5.179 5.179 0 0 1 32 21.179A2.821 2.821 0 0 1 29.179 24H18.82A2.821 2.821 0 0 1 16 21.179m0 9.321v3.25a1.25 1.25 0 1 0 2.5 0V30.5H40v8.25c0 2.9-2.35 5.25-5.25 5.25h-21.5A5.25 5.25 0 0 1 8 38.75V30.5z"
            />
          </mask>
          <mask id="a-icon-backpack_outline-mask">
            <path
              style="filter: brightness(0.5)"
              fill="#000"
              stroke="#fff"
              stroke-linejoin="round"
              stroke-width="3"
              d="M21.179 18.5a2.68 2.68 0 0 0-2.679 2.679c0 .177.144.321.321.321H29.18a.321.321 0 0 0 .321-.321a2.68 2.68 0 0 0-2.679-2.679zM24 4a8.001 8.001 0 0 0-7.951 7.113C11.239 13.872 8 19.058 8 25v3h32v-3c0-5.942-3.24-11.128-8.049-13.887A8.001 8.001 0 0 0 24 4m0 5c-1.764 0-3.461.285-5.048.813a5.501 5.501 0 0 1 10.096 0A15.984 15.984 0 0 0 24 9m-8 12.179A5.179 5.179 0 0 1 21.179 16h5.642A5.179 5.179 0 0 1 32 21.179A2.821 2.821 0 0 1 29.179 24H18.82A2.821 2.821 0 0 1 16 21.179m0 9.321v3.25a1.25 1.25 0 1 0 2.5 0V30.5H40v8.25c0 2.9-2.35 5.25-5.25 5.25h-21.5A5.25 5.25 0 0 1 8 38.75V30.5z"
            />
          </mask>
        </defs>
        <clipPath id="idClipper">
          <rect
            x="0"
            y="${43-e.value*32}"
            width="48"
            height="${e.value*32}"
          />
        </clipPath>
        <path
          fill="${e.color}"
          d="M0 0h48v48H0z"
          mask="url(#a-icon-backpack_fill-mask)"
          clip-path="url(#idClipper)"
        />
        <path
          fill="${e.color}"
          d="M0 0h48v48H0z"
          mask="url(#a-icon-backpack_outline-mask)"
        />
      </svg>
    `,()=>!e.svg);return(k,r)=>e.svg?(i(),u("svg",Vt,[o(s)?(i(),u("defs",Dt,[...r[0]||(r[0]=[n("mask",{id:"a-icon-backpack_fill-mask"},[n("path",{fill:"#fff",stroke:"#000","stroke-linejoin":"round","stroke-width":"4",d:"M21.179 18.5a2.68 2.68 0 0 0-2.679 2.679c0 .177.144.321.321.321H29.18a.321.321 0 0 0 .321-.321a2.68 2.68 0 0 0-2.679-2.679zM24 4a8.001 8.001 0 0 0-7.951 7.113C11.239 13.872 8 19.058 8 25v3h32v-3c0-5.942-3.24-11.128-8.049-13.887A8.001 8.001 0 0 0 24 4m0 5c-1.764 0-3.461.285-5.048.813a5.501 5.501 0 0 1 10.096 0A15.984 15.984 0 0 0 24 9m-8 12.179A5.179 5.179 0 0 1 21.179 16h5.642A5.179 5.179 0 0 1 32 21.179A2.821 2.821 0 0 1 29.179 24H18.82A2.821 2.821 0 0 1 16 21.179m0 9.321v3.25a1.25 1.25 0 1 0 2.5 0V30.5H40v8.25c0 2.9-2.35 5.25-5.25 5.25h-21.5A5.25 5.25 0 0 1 8 38.75V30.5z"})],-1),n("mask",{id:"a-icon-backpack_outline-mask"},[n("path",{class:"brightness-50",fill:"#000",stroke:"#fff","stroke-linejoin":"round","stroke-width":"3",d:"M21.179 18.5a2.68 2.68 0 0 0-2.679 2.679c0 .177.144.321.321.321H29.18a.321.321 0 0 0 .321-.321a2.68 2.68 0 0 0-2.679-2.679zM24 4a8.001 8.001 0 0 0-7.951 7.113C11.239 13.872 8 19.058 8 25v3h32v-3c0-5.942-3.24-11.128-8.049-13.887A8.001 8.001 0 0 0 24 4m0 5c-1.764 0-3.461.285-5.048.813a5.501 5.501 0 0 1 10.096 0A15.984 15.984 0 0 0 24 9m-8 12.179A5.179 5.179 0 0 1 21.179 16h5.642A5.179 5.179 0 0 1 32 21.179A2.821 2.821 0 0 1 29.179 24H18.82A2.821 2.821 0 0 1 16 21.179m0 9.321v3.25a1.25 1.25 0 1 0 2.5 0V30.5H40v8.25c0 2.9-2.35 5.25-5.25 5.25h-21.5A5.25 5.25 0 0 1 8 38.75V30.5z"})],-1)])])):m("",!0),o(l)?(i(),u("clipPath",{key:1,id:o(a)},[n("rect",{x:"0",y:43-e.value*32,width:"48",height:e.value*32,class:"transition-[y,height]"},null,8,Nt)],8,Et)):m("",!0),o(l)?(i(),u("symbol",{key:2,id:o(t)},[n("path",{fill:e.color,d:"M0 0h48v48H0z",mask:"url(#a-icon-backpack_fill-mask)","clip-path":`url(#${o(a)})`,class:"transition-[color]"},null,8,Ft),n("path",{fill:e.color,d:"M0 0h48v48H0z",mask:"url(#a-icon-backpack_outline-mask)",class:"transition-[color]"},null,8,Rt)],8,Ot)):m("",!0),n("use",{href:`#${o(t)}`},null,8,Ut)])):(i(),u("div",{key:0,class:p([o(c),"size-[1em]"])},null,2))}}),Kt=Object.assign(Gt,{__name:"AIconBackpack"}),Wt={class:"flex grow items-center"},qt={class:"flex grow"},Yt=Symbol(),Jt=b({__name:"Effort",props:{task:{},svg:{type:Boolean}},setup(e){const t=De(),s=Z(Yt,()=>({visible:t.visibleDefault}),!0);return(a,l)=>{const c=Kt;return i(),u("div",Wt,[o(s).visible.has(e.task.effort)?(i(),A(c,{key:0,value:(e.task.effort+4)/8,color:o(t).color(e.task.effort),svg:e.svg},null,8,["value","color","svg"])):m("",!0),n("div",qt,[$(a.$slots,"default")])])}}}),Qt=Object.assign(Jt,{__name:"MTaskPriorityEffort"}),Xt={class:"saturate-75 space-x-1 *:inline-block *:align-top"},Zt=b({__name:"Priority",props:{task:{},svg:{type:Boolean}},setup(e){return(t,s)=>{const a=wt,l=jt,c=Qt;return i(),u("div",Xt,[g(a,{task:e.task,svg:e.svg},null,8,["task","svg"]),g(l,{task:e.task,svg:e.svg},null,8,["task","svg"]),g(c,{task:e.task,svg:e.svg},null,8,["task","svg"])])}}}),es=Object.assign(Zt,{__name:"MTaskPriority"}),ts={style:{color:"var(--color)"}},ss=b({__name:"TagsListItem",props:{tag:{},isSelected:{type:Boolean}},setup(e){const t=`m-task-tags-list-item-${te()}`;return(s,a)=>(i(),u("div",{class:p(["tag","whitespace-nowrap","normal-case","p-[0.5em]","rounded-full","text-xs","text-ellipsis","overflow-hidden","min-w-0","[text-box-edge:ex_alphabetic] [text-box-trim:trim-both]","transition-colors duration-500","text-[oklch(from_var(--color-picked-neon)_l_c_var(--hue))]","bg-[oklch(from_var(--color-picked-neon)_l_c_var(--hue)/0.15)]","shadow-[inset_0_0_0.15em_0.15em] shadow-[oklch(from_var(--color-picked-neon)_l_c_var(--hue)/0.2)]"]),style:V({"--hue":e.tag.hue,"view-transition-name":t})},[$(s.$slots,"left"),n("span",ts,[e.tag.name.trim()?(i(),u(R,{key:0},[F(x(e.tag.name),1)],64)):(i(),u(R,{key:1},[F(" ")],64))]),$(s.$slots,"right")],4))}}),as=Object.assign(ss,{__name:"MTaskTagsListItem"}),os=b({__name:"Size",props:{show:{type:Boolean,default:!0},msDuration:{default:450},noAppear:{type:Boolean},tag:{},items:{},filter:{type:Function,default:()=>!0},getKey:{type:Function,default:we}},emits:["show","hide"],setup(e,{emit:t}){$e(r=>({v886b1cb0:o(c)}));const s=t;P(()=>e.show&&s("show"));const a=j(!1);P(()=>e.show&&(a.value=!0),{flush:"sync"});async function l(){await Me(),a.value=!1,s("hide")}const c=d(()=>`${e.msDuration}ms`),k=j(!1);return P(()=>{e.show&&!k.value&&(k.value=!0)},{flush:"post"}),(r,y)=>e.items?(i(),A(xe,{key:0,name:"size",duration:e.msDuration,tag:e.tag,"appear-active-class":"transition-size size-enter-active","enter-active-class":"transition-size size-enter-active","leave-active-class":"transition-size size-leave-active"},{default:C(()=>[(i(!0),u(R,null,_e(e.items,(v,_)=>(i(),u(R,{key:e.getKey(v)},[e.filter(v)?$(r.$slots,"item",{key:0,item:v,index:_}):m("",!0)],64))),128))]),_:3},8,["duration","tag"])):o(a)?(i(),A(ze,{key:1,appear:o(k)||!e.noAppear,name:"size",duration:e.msDuration,"appear-active-class":"transition-size size-enter-active","enter-active-class":"transition-size size-enter-active","leave-active-class":"transition-size size-leave-active",onAfterLeave:y[0]||(y[0]=v=>!e.show&&l())},{default:C(()=>[e.show?$(r.$slots,"default",{key:0}):m("",!0)]),_:3},8,["appear","duration"])):m("",!0)}}),ns=Object.assign(os,{__name:"ATransitionSize"}),is={class:"flex flex-wrap justify-end"},ls=["onClick"],cs=["onClick"],rs=b({__name:"TagsList",props:{tags:{},notTags:{default:()=>[]}},emits:["tag-click","not-tag-click"],setup(e,{emit:t}){const s=t;return(a,l)=>{const c=as,k=ns;return i(),u("div",is,[g(k,{items:e.tags},{item:C(({item:r})=>[n("div",{class:p(["relative p-0.5"]),onClick:y=>s("tag-click",r)},[g(c,{class:"overflow-hidden",tag:r},null,8,["tag"])],8,ls)]),_:1},8,["items"]),g(k,{items:e.notTags},{item:C(({item:r})=>[n("div",{class:p(["relative p-0.5","before:bg-danger-neon before:absolute before:top-1/2 before:h-px before:w-full before:-rotate-12"]),onClick:y=>s("not-tag-click",r)},[g(c,{class:"overflow-hidden",tag:r},null,8,["tag"])],8,cs)]),_:1},8,["items"])])}}}),us=Object.assign(rs,{__name:"MTaskTagsList"}),ds={class:"mb-1 flex h-4 items-start contain-strict"},ks={class:"text-[0.5em]"},ms={class:"text-[0.5em]"},fs={key:0,class:"text-picked-pastel-15 ml-2 mt-2 text-[0.65rem] brightness-[0.6]"},vs=b({__name:"Info",props:{task:{},svg:{type:Boolean},path:{}},emits:["select","edit"],setup(e,{emit:t}){const s=Fe(),a=t,l=Ce(()=>e.task.msUpdateAvailabilityAt),c=d(()=>l.value?`Becomes ${e.task.isAvailable?"unavailable":"available"} in ${l.value}`:""),k=Le.use(()=>e.task),r=d(()=>e.path!==void 0&&s.pathsSelected.has(e.path));return(y,v)=>{const _=Qe,h=Se,G=st,K=it,D=oe,W=es,q=us;return se((i(),u("div",{class:p(["grid p-2",{"select-none":o(s).isSomeEditMode}]),onClick:v[0]||(v[0]=ee=>a("select",e.path))},[n("div",ds,[g(h,{show:o(s).isEditMode},{default:C(()=>[g(_,{"model-value":o(r),class:"text-picked-pastel-120/70! pointer-events-none p-0 pl-1 [&_:has(>svg)]:m-0",circle:""},null,8,["model-value"])]),_:1},8,["show"]),g(G,{key:"progress",done:e.task.subtasksDone,total:e.task.subtaskIds.size,class:"text-picked-deep dark:text-picked-neon opacity-70"},null,8,["done","total"]),!e.task.subtaskIds.size&&e.task.isDone?(i(),A(K,{key:"done",color:o(S)(1),class:"opacity-70"},null,8,["color"])):m("",!0),v[1]||(v[1]=n("div",{class:"grow"},null,-1)),g(h,{show:e.task.blockedIds.size>0},{default:C(()=>[n("div",{class:p(["text-picked-neon","mr-4","flex items-end","transition-colors duration-150 ease-in-out"]),style:V({"--color-picked":o(S)((e.task.blockedIds.size-e.task.blockedCount)/e.task.blockedIds.size)})},[g(D,{key:"blocker",name:"blocker"}),n("div",ks,x(e.task.blockedIds.size-e.task.blockedCount)+"/"+x(e.task.blockedIds.size),1)],4)]),_:1},8,["show"]),g(h,{show:e.task.blockerIds.size>0},{default:C(()=>[n("div",{class:p(["text-picked-neon","mr-4","flex items-end","transition-colors duration-150 ease-in-out"]),style:V({"--color-picked":o(S)(e.task.blockersDone/e.task.blockerIds.size)})},[g(D,{key:"blocked",name:"blocked"}),n("div",ms,x(e.task.blockersDone)+"/"+x(e.task.blockerIds.size),1)],4)]),_:1},8,["show"]),g(W,{task:e.task,class:"ml-auto hue-rotate-[calc(-1*var(--hue-rotation))]",svg:e.svg},null,8,["task","svg"])]),n("div",null,x(e.task.title),1),g(q,{tags:o(k).tags,class:"mr-1 pt-2"},null,8,["tags"]),o(c)?(i(),u("span",fs,x(o(c))+"  ",1)):m("",!0)],2)),[[o(Ae),()=>a("edit",e.path)]])}}}),ps=Object.assign(vs,{__name:"MTaskInfo"});function hs({id:e,autofocus:t}){X(()=>t&&document.getElementById(e)?.focus())}const gs=b({__name:"AutoFocus",props:{id:{},autofocus:{type:Boolean}},setup(e){const t=e;return X(()=>t.autofocus&&document.getElementById(t.id)?.focus()),hs(t),(s,a)=>$(s.$slots,"default")}}),ws=Object.assign(gs,{__name:"AAutoFocus"}),M=Ie("default-task-section","relations?id=subtasks");function $s(e){const t=Te();return d(()=>{const s=H(e.page),a=H(e.taskId);return[{icon:"workspace",label:"Home",onClick(){t.push("/task/list")}},{icon:"edit",label:"Details",onClick(){t.push(`/task/${a}/details`)},onLongPress(){M.value="details",this.onClick()},class:{"text-primary":s==="details"}},{icon:"priority",label:"Priority",onClick(){t.push(`/task/${a}/priority`)},onLongPress(){M.value="priority",this.onClick()},class:{"text-primary":s==="priority"}},{icon:"tags",label:"Tags",onClick(){t.push(`/task/${a}/tags`)},onLongPress(){M.value="tags",this.onClick()},class:{"text-primary":s==="tags"}},{icon:"subtask",label:"Subtasks",onClick(){t.push(`/task/${a}/relations?id=subtasks`)},onLongPress(){M.value="relations?id=subtasks",this.onClick()},class:{"text-primary":s==="subtasks"}},{icon:"blocker",label:"Blockers",onClick(){t.push(`/task/${a}/relations?id=blockers`)},onLongPress(){M.value="relations?id=blockers",this.onClick()},class:{"text-primary":s==="blockers"}},{icon:"schedule",label:"Schedule",onClick(){t.push(`/task/${a}/schedule`)},onLongPress(){M.value="relations?id=schedule",this.onClick()},class:{"text-primary":s==="schedule"}},{icon:"suptask",label:"Parent tasks",onClick(){t.push(`/task/${a}/relations?id=suptasks`)},onLongPress(){M.value="relations?id=suptasks",this.onClick()},class:{"text-primary":s==="suptasks"}},{icon:"blocked",label:"Blocked",onClick(){t.push(`/task/${a}/relations?id=blocked`)},onLongPress(){M.value="relations?id=blocked",this.onClick()},class:{"text-primary":s==="blocked"}}]})}function _s(e,t){e.push(`/task/${t}/${M.value}`)}export{ps as M,us as _,as as a,wt as b,je as c,jt as d,Be as e,Qt as f,De as g,Ke as h,ws as i,Ne as j,Fe as k,Oe as l,_s as o,ys as r,$s as u};
